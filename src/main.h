#ifndef FUNCTIONS_H
#define FUNCTIONS_H

#include <bitset>
#include <Arduino.h>

//Pin definitions
  //Row select and enable
  const int RA0_PIN = D3;
  const int RA1_PIN = D6;
  const int RA2_PIN = D12;
  const int REN_PIN = A5;

  //Matrix input and output
  const int C0_PIN = A2;
  const int C1_PIN = D9;
  const int C2_PIN = A6;
  const int C3_PIN = D1;
  const int OUT_PIN = D11;

  //Audio analogue out
  const int OUTL_PIN = A4;
  const int OUTR_PIN = A3;

  //Joystick analogue in
  const int JOYY_PIN = A0;
  const int JOYX_PIN = A1;

  //Output multiplexer bits
  const int KNOB_MODE = 2;
  const int DEN_BIT = 3;
  const int DRST_BIT = 4;
  const int HKOW_BIT = 5;
  const int HKOE_BIT = 6;

void setRow(uint8_t rowIdx);

std::bitset<4> readCols();

#define MAX_DEVICES 10
inline uint32_t device_id[MAX_DEVICES];
inline uint8_t device_position[MAX_DEVICES];
inline uint8_t device_count = 0;

void determinePosition();

#endif